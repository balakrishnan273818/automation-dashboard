/* ==========================================================
   BUTTONS
========================================================== */

.theme-toggle button,
.view-toggle button{
    border:none;
    padding:6px 10px;
    border-radius:6px;
    background:var(--bg-soft);
    cursor:pointer;
}

.theme-toggle button{color:var(--text-main);}
.view-toggle button{color:#fff;}

.view-toggle button.active{background:#4caf50;}

/* ==========================================================
   STATUS BADGES
========================================================== */

.status{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:4px 12px;
    border-radius:999px;
    font-size:12px;
    width:fit-content;
    white-space:nowrap;
    color:#fff;
    font-weight:600;
}

.status.at-risk,
.summary-item.at-risk{background:#c94a4a;}

.status.in-progress,
.summary-item.in-progress{background:#4a7fb8;}

.status.achieved,
.summary-item.achieved{background:#4aa96c;}

/* ==========================================================
   CARD
========================================================== */

.card{
    background:var(--bg-card);
    border-radius:10px;
    padding:14px;
    position:relative;
    transition:.18s ease;
}

.serial{
    position:absolute;
    top:8px;
    right:10px;
    opacity:.4;
    font-size:12px;
}

.card-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
}

/* ==========================================================
   DONUT
========================================================== */

.donut{
    --size:90px;
    --thickness:12px;
    --ring-color:#4caf50;
    --donut-bg:var(--bg-border);

    width:var(--size);
    height:var(--size);
    border-radius:50%;
    position:relative;

    background:conic-gradient(
        var(--ring-color) calc(var(--value)*1%),
        var(--donut-bg) 0
    );

    display:flex;
    align-items:center;
    justify-content:center;
    margin:12px auto;
}

.donut::before{
    content:"";
    position:absolute;
    inset:var(--thickness);
    background:var(--bg-card);
    border-radius:50%;
}

.donut span{
    position:relative;
    font-weight:bold;
    font-size:14px;
}

/* TARGET MARKER */

.donut::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:50%;
    pointer-events:none;

    background:conic-gradient(
        transparent calc(60% - .5%),
        #fff calc(60% - .5%),
        #fff calc(60% + .5%),
        transparent calc(60% + .5%)
    );

    mask:radial-gradient(
        farthest-side,
        transparent calc(100% - var(--thickness) - 1px),
        #000 calc(100% - var(--thickness)),
        #000 calc(100% - var(--thickness) + 1px),
        transparent calc(100% - var(--thickness) + 2px)
    );
}

body[data-theme="light"] .donut::after{
    background:conic-gradient(
        transparent calc(60% - .5%),
        #222 calc(60% - .5%),
        #222 calc(60% + .5%),
        transparent calc(60% + .5%)
    );
}

/* ==========================================================
   KPI BAR
========================================================== */

.list-progress{display:none;}

body.list-view .list-progress{
    display:block;
    flex:1;
    height:6px;
    background:var(--bg-border);
    border-radius:6px;
    overflow:hidden;
}

.list-progress-fill{
    height:100%;
    background:#4caf50;
    transition:width .25s ease;
}

.card.at-risk .list-progress-fill{background:#e74c3c;}
.card.in-progress .list-progress-fill{background:#3498db;}
.card.achieved .list-progress-fill{background:#2ecc71;}

/* ==========================================================
   SUMMARY BAR
========================================================== */

.summary-bar{
    display:flex;
    gap:18px;
    margin-bottom:14px;
    font-size:14px;
    font-weight:600;
}

.summary-item{
    padding:6px 12px;
    border-radius:999px;
    background:var(--bg-soft);
    color:var(--text-main);
    font-weight:600;
}

/* ==========================================================
   SORT
========================================================== */

.sort-controls{
    margin-bottom:12px;
    font-size:14px;
}

.sortable{
    cursor:pointer;
    user-select:none;
    position:relative;
}

.sortable:hover{opacity:.7;}

.sort-arrow{
    margin-left:6px;
    font-size:11px;
    opacity:.8;
    color:#aaa;
}

.sortable.active{color:#4caf50;}

/* ==========================================================
   STATUS GROUP HEADER — ENTERPRISE CONTRAST
========================================================== */

.status-header {
    display:flex;
    align-items:center;
    gap:10px;
    padding:12px 16px;
    font-weight:700;
    cursor:pointer;
    border-radius:8px;

    background:var(--bg-soft);
    border:1px solid var(--bg-border);

    box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.04),
        0 2px 6px rgba(0,0,0,0.25);
}

.status-header:hover {
    transform:translateY(-1px);
    filter:brightness(1.05);
}

.status-row.active .status-header {
    border-left:4px solid var(--accent);
    padding-left:12px;
}

/* Light theme contrast */
body[data-theme="light"] .status-header {
    border:1px solid var(--bg-border);
    box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.6),
        0 2px 4px rgba(0,0,0,0.06);
}

/* ==========================================================
   LIGHT THEME — TOP SUMMARY STATUS BADGES CONTRAST FIX
   (ONLY TOP BAR BADGES — NO OTHER BADGES AFFECTED)
========================================================== */

body[data-theme="light"] .summary-bar .summary-item.at-risk,
body[data-theme="light"] .summary-bar .summary-item.in-progress,
body[data-theme="light"] .summary-bar .summary-item.achieved{
    color:#ffffff;
}